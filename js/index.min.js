function htmlRender(e){var t=e.getHunters();localStorage.clear(),localStorage.setItem("SHOW_ANIMATION",SHOW_ANIMATION);for(let e=0;e<t.length;e++){const n=t[e].getAsObject();let a=e+1;const r=document.querySelector("#hunter-"+a);r.innerHTML='<p class="hunter_name t-center">'+n.username+"</p>",localStorage.setItem("hunterName"+e,n.username);let l="",o="";n.itemList.forEach(e=>{let t=checkOnDualList(e[0],items);t=t||checkOnDualList(e[0],itemsLights),l+='<li><img src="./img/'+e[0]+'.png" alt="'+t+'"> '+t+"</li>",o+='<img src="./img/'+e[0]+'.png" alt="'+t+'"> '+t+" "}),o+="<br>",localStorage.setItem("hunterItems"+e,o),r.innerHTML+='<ul class="items-list">'+l+"</ul>"}for(let e=t.length;e<4;e++){let t=e+1;const n=document.querySelector("#hunter-"+t);n.innerHTML=""}}function animateRender(e,t){var n=t.getHunters(),a=[],r=[];$("#animated_block").fadeIn(100),n.forEach(e=>{a.push(e.getName());let t=e.getItems();for(let e=0;e<t.length;e++){let n=checkOnDualList(t[e][0],items);n=n||checkOnDualList(t[e][0],itemsLights),r.push(n)}});let l=1;for(let e=0;e<a.length;e++)for(let t=0;t<n[e].getItems().length;t++)window.setTimeout(textRender,TIMEOUT_DELAY*l,a[e],r[l-1]),l++;playAudio("Heartbeat",.5,!0,TIMEOUT_DELAY*l),window.setTimeout(()=>{$("#animated_block").fadeOut(100),$("#wheel_hunter").html("&nbsp;"),$("#animated_text").html("&nbsp;"),e(t)},TIMEOUT_DELAY*l)}function animateOneItem(e,t,n){$("#animated_block").fadeIn(100);let a=checkOnDualList(n.getLastItem(),items);a=a||checkOnDualList(n.getLastItem(),itemsLights),window.setTimeout(textRender,TIMEOUT_DELAY,n.getName(),a),playAudio("Heartbeat",.5,!0,2*TIMEOUT_DELAY),window.setTimeout(()=>{$("#animated_block").fadeOut(100),$("#wheel_hunter").html("&nbsp;"),$("#animated_text").html("&nbsp;"),e(t)},2*TIMEOUT_DELAY)}function textRender(e,t){if("string"!=typeof e||"string"!=typeof t)return throwError("Wrong parameter detected when the wheel try to who text");$("#wheel_hunter").html(e),$("#animated_text").html(t).fadeIn(500).delay(3e3).fadeOut(500)}const appHunt=new AppHunt,appSafari=new AppSafari,TIMEOUT_DELAY=5e3;localStorage.getItem("SHOW_ANIMATION")||localStorage.setItem("SHOW_ANIMATION",!0);var SHOW_ANIMATION="true"===localStorage.getItem("SHOW_ANIMATION");document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("link[rel=preload]");e.forEach(e=>{e.rel="stylesheet"})}),document.addEventListener("DOMContentLoaded",function(){function e(e){let t=e.getAttribute("data-itemadd")-1,n=appSafari.getHunterById(t);var a=appSafari.generateItem(n);a&&(SHOW_ANIMATION?animateOneItem(htmlRender,appSafari,n):htmlRender(appSafari))}$("#errBlock").hide();const t=document.querySelector("#wheelAnim");t.checked=SHOW_ANIMATION,t.addEventListener("click",function(){this.checked?(SHOW_ANIMATION=!0,localStorage.setItem("SHOW_ANIMATION",!0)):(SHOW_ANIMATION=!1,localStorage.setItem("SHOW_ANIMATION",!1))},this);const n=document.querySelector("#huntForm"),a=document.querySelector("#itemsNumber"),r=document.querySelector("#gen_map");a.addEventListener("change",function(){var e=a.selectedIndex;appHunt.setMaxItems(a[e].value)}),n.addEventListener("submit",function(e){e.preventDefault();let t=!1;appHunt.reset(),appSafari.reset();let a=new FormData(n);for(const e of a.entries())e[1]&&(appHunt.setHunter(htmlEncode(e[1])),t=!0);t&&(SHOW_ANIMATION?animateRender(htmlRender,appHunt):htmlRender(appHunt))});const l=document.querySelector("#safari_form"),o=document.querySelectorAll("input[data-itemAdd]");o.forEach(t=>{t.addEventListener("click",()=>{e(t)})}),l.addEventListener("submit",function(e){e.preventDefault(),appHunt.reset(),appSafari.reset();let t=new FormData(l),n=t.entries(),a=[];for(const e of n)""!==e[1]&&a.push(e[1]);let r=getRandomInt(a.length);a.forEach((e,t)=>{e&&(a.length<4?appSafari.setHunter(htmlEncode(e)):4===a.length?t===r?appSafari.setHunterLight(htmlEncode(e)):appSafari.setHunterPhoto(htmlEncode(e)):throwError("Number of player is not possible !"))}),SHOW_ANIMATION?animateRender(htmlRender,appSafari):htmlRender(appSafari)}),r.addEventListener("click",function(e){e.preventDefault(),appHunt.generateMap();let t=["Adult","Attack","Away","Baby","Behind","Child","Close","Dad","Daughter","Death","Die","Far","Hate","Here","Hurt","Kid","Kill","Mum","Next","Old","Son","Young"],n=t[getRandomInt(t.length)];playAudio(n,.2,!1);const a=document.querySelector("#map_name");a.innerHTML=appHunt.getMapName()})});