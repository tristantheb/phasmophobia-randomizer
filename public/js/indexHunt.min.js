function htmlRender(e){var t=e.getHunters();localStorage.clear(),localStorage.setItem("SHOW_ANIMATION",SHOW_ANIMATION);for(let e=0;e<t.length;e++){const n=t[e].getAsObject();let r=e+1;const a=document.querySelector("#hunter-"+r);a.innerHTML='<p class="hunter_name t-center">'+n.username+"</p>",localStorage.setItem("hunterName"+e,n.username);let l="",o="";n.itemList.forEach(e=>{let t=checkOnDualList(e[0],items);t=t||checkOnDualList(e[0],itemsLights),l+='<li><img src="./img/'+e[0]+'.png" alt="'+t+'"> '+t+"</li>",o+='<img src="./img/'+e[0]+'.png" alt="'+t+'"> '+t+" "}),o+="<br>",localStorage.setItem("hunterItems"+e,o),a.innerHTML+='<ul class="items-list">'+l+"</ul>"}for(let e=t.length;e<4;e++){let t=e+1;const n=document.querySelector("#hunter-"+t);n.innerHTML=""}}function animateRender(e,t){var n=t.getHunters(),r=[],a=[];$("#animated_block").fadeIn(100),n.forEach(e=>{r.push(e.getName());let t=e.getItems();for(let e=0;e<t.length;e++){let n=checkOnDualList(t[e][0],items);n=n||checkOnDualList(t[e][0],itemsLights),a.push(n)}});let l=1;for(let e=0;e<r.length;e++)for(let t=0;t<n[e].getItems().length;t++)window.setTimeout(textRender,TIMEOUT_DELAY*l,r[e],a[l-1]),l++;playAudio("Heartbeat",.5,!0,TIMEOUT_DELAY*l),window.setTimeout(()=>{$("#animated_block").fadeOut(100),$("#wheel_hunter").html("&nbsp;"),$("#animated_text").html("&nbsp;"),e(t)},TIMEOUT_DELAY*l)}function textRender(e,t){if("string"!=typeof e||"string"!=typeof t)return throwError("Wrong parameter detected when the wheel try to who text");$("#wheel_hunter").html(e),$("#animated_text").html(t).fadeIn(500).delay(3e3).fadeOut(500)}const appHunt=new AppHunt,TIMEOUT_DELAY=5e3;localStorage.getItem("SHOW_ANIMATION")||localStorage.setItem("SHOW_ANIMATION","true");var SHOW_ANIMATION="true"===localStorage.getItem("SHOW_ANIMATION");document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("link[rel=preload]");e.forEach(e=>{e.rel="stylesheet"})}),document.addEventListener("DOMContentLoaded",function(){$("#errBlock").hide();const e=document.querySelector("#wheelAnim");e.checked=SHOW_ANIMATION,e.addEventListener("click",function(){this.checked?(SHOW_ANIMATION=!0,localStorage.setItem("SHOW_ANIMATION","true")):(SHOW_ANIMATION=!1,localStorage.setItem("SHOW_ANIMATION","false"))},this);const t=document.querySelector("#roomId").textContent,n=document.querySelector("#formHunt"),r=document.querySelector("#classic_mode_maxItems"),a=document.querySelector("#gen_map");r.addEventListener("change",function(){let e=r.selectedIndex;appHunt.setMaxItems(r[e].value)}),n.addEventListener("submit",function(e){e.preventDefault();let r=!1;appHunt.reset();let a=new FormData(n);for(const e of a.entries())e[1]&&e[0].includes("hunter")&&(appHunt.setHunter(htmlEncode(e[1])),r=!0);fetch("/submit/"+t,{method:"post","X-Requested-With":"XMLHttpRequest",body:appHunt.getAll()}).then(e=>{200===e.status&&302===e.status||throwError("Unable to contact the database to share the print run.")}),r&&(SHOW_ANIMATION?animateRender(htmlRender,appHunt):htmlRender(appHunt))}),a.addEventListener("click",function(e){e.preventDefault(),appHunt.generateMap();let t=["Adult","Attack","Away","Baby","Behind","Child","Close","Dad","Daughter","Death","Die","Far","Hate","Here","Hurt","Kid","Kill","Mum","Next","Old","Son","Young"],n=t[getRandomInt(t.length)];playAudio(n,.2,!1);const r=document.querySelector("#map_name");r.innerHTML=appHunt.getMapName()})});